import{a as gt,b as wt,c as vt,d as Ie,e as bt,f as Mt}from"./chunk-KSVYTVJI.js";import{a as je,c as It,d as jt}from"./chunk-W3B2JENG.js";import{a as St,b as _t,c as Pt,d as Ct,e as B,h as xt,i as ve,j as Et,k as Rt,l as be,m as se,n as ae,o as kt,p as Re,q as ke,r as Me,s as Ot,t as Oe,u as Tt}from"./chunk-EMZKZLT5.js";import{m as oe,n as Ee,o as re}from"./chunk-Q2BWDDRH.js";import{$a as Ze,B as Ke,C as xe,D as z,Ea as ft,G as nt,H as it,J as ot,L as rt,La as pt,Na as U,O as We,Oa as D,R as st,V,X as K,Y as at,Ya as X,_a as H,a as A,aa as E,ab as y,b as F,bb as g,c as Fe,cb as P,d as et,da as W,db as ut,eb as lt,fa as ne,fb as ie,ga as I,gb as R,h as ye,hb as j,ib as v,jb as ht,k as tt,ka as ct,kb as mt,l as Ce,ma as Z,p as N,pb as Y,q as $,qa as dt,qb as ge,rb as we,u as x,w as ee,wa as O,xa as T,zb as yt}from"./chunk-YXUJRLCC.js";var Ht=Fe((mi,Vt)=>{"use strict";Vt.exports=window.FormData});var Kt=Fe((J,Jt)=>{"use strict";var Gt=typeof self<"u"?self:J,Ue=function(){function o(){this.fetch=!1,this.DOMException=Gt.DOMException}return o.prototype=Gt,new o}();(function(o){var t=function(e){var n={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function i(s){return s&&DataView.prototype.isPrototypeOf(s)}if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(s){return s&&r.indexOf(Object.prototype.toString.call(s))>-1};function f(s){if(typeof s!="string"&&(s=String(s)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(s))throw new TypeError("Invalid character in header field name");return s.toLowerCase()}function l(s){return typeof s!="string"&&(s=String(s)),s}function h(s){var c={next:function(){var m=s.shift();return{done:m===void 0,value:m}}};return n.iterable&&(c[Symbol.iterator]=function(){return c}),c}function p(s){this.map={},s instanceof p?s.forEach(function(c,m){this.append(m,c)},this):Array.isArray(s)?s.forEach(function(c){this.append(c[0],c[1])},this):s&&Object.getOwnPropertyNames(s).forEach(function(c){this.append(c,s[c])},this)}p.prototype.append=function(s,c){s=f(s),c=l(c);var m=this.map[s];this.map[s]=m?m+", "+c:c},p.prototype.delete=function(s){delete this.map[f(s)]},p.prototype.get=function(s){return s=f(s),this.has(s)?this.map[s]:null},p.prototype.has=function(s){return this.map.hasOwnProperty(f(s))},p.prototype.set=function(s,c){this.map[f(s)]=l(c)},p.prototype.forEach=function(s,c){for(var m in this.map)this.map.hasOwnProperty(m)&&s.call(c,this.map[m],m,this)},p.prototype.keys=function(){var s=[];return this.forEach(function(c,m){s.push(m)}),h(s)},p.prototype.values=function(){var s=[];return this.forEach(function(c){s.push(c)}),h(s)},p.prototype.entries=function(){var s=[];return this.forEach(function(c,m){s.push([m,c])}),h(s)},n.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function b(s){if(s.bodyUsed)return Promise.reject(new TypeError("Already read"));s.bodyUsed=!0}function M(s){return new Promise(function(c,m){s.onload=function(){c(s.result)},s.onerror=function(){m(s.error)}})}function L(s){var c=new FileReader,m=M(c);return c.readAsArrayBuffer(s),m}function le(s){var c=new FileReader,m=M(c);return c.readAsText(s),m}function C(s){for(var c=new Uint8Array(s),m=new Array(c.length),_=0;_<c.length;_++)m[_]=String.fromCharCode(c[_]);return m.join("")}function he(s){if(s.slice)return s.slice(0);var c=new Uint8Array(s.byteLength);return c.set(new Uint8Array(s)),c.buffer}function _e(){return this.bodyUsed=!1,this._initBody=function(s){this._bodyInit=s,s?typeof s=="string"?this._bodyText=s:n.blob&&Blob.prototype.isPrototypeOf(s)?this._bodyBlob=s:n.formData&&FormData.prototype.isPrototypeOf(s)?this._bodyFormData=s:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)?this._bodyText=s.toString():n.arrayBuffer&&n.blob&&i(s)?(this._bodyArrayBuffer=he(s.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(s)||a(s))?this._bodyArrayBuffer=he(s):this._bodyText=s=Object.prototype.toString.call(s):this._bodyText="",this.headers.get("content-type")||(typeof s=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(s)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var s=b(this);if(s)return s;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(L)}),this.text=function(){var s=b(this);if(s)return s;if(this._bodyBlob)return le(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(on)}),this.json=function(){return this.text().then(JSON.parse)},this}var He=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function nn(s){var c=s.toUpperCase();return He.indexOf(c)>-1?c:s}function Q(s,c){c=c||{};var m=c.body;if(s instanceof Q){if(s.bodyUsed)throw new TypeError("Already read");this.url=s.url,this.credentials=s.credentials,c.headers||(this.headers=new p(s.headers)),this.method=s.method,this.mode=s.mode,this.signal=s.signal,!m&&s._bodyInit!=null&&(m=s._bodyInit,s.bodyUsed=!0)}else this.url=String(s);if(this.credentials=c.credentials||this.credentials||"same-origin",(c.headers||!this.headers)&&(this.headers=new p(c.headers)),this.method=nn(c.method||this.method||"GET"),this.mode=c.mode||this.mode||null,this.signal=c.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&m)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(m)}Q.prototype.clone=function(){return new Q(this,{body:this._bodyInit})};function on(s){var c=new FormData;return s.trim().split("&").forEach(function(m){if(m){var _=m.split("="),S=_.shift().replace(/\+/g," "),w=_.join("=").replace(/\+/g," ");c.append(decodeURIComponent(S),decodeURIComponent(w))}}),c}function rn(s){var c=new p,m=s.replace(/\r?\n[\t ]+/g," ");return m.split(/\r?\n/).forEach(function(_){var S=_.split(":"),w=S.shift().trim();if(w){var Pe=S.join(":").trim();c.append(w,Pe)}}),c}_e.call(Q.prototype);function q(s,c){c||(c={}),this.type="default",this.status=c.status===void 0?200:c.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in c?c.statusText:"OK",this.headers=new p(c.headers),this.url=c.url||"",this._initBody(s)}_e.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},q.error=function(){var s=new q(null,{status:0,statusText:""});return s.type="error",s};var sn=[301,302,303,307,308];q.redirect=function(s,c){if(sn.indexOf(c)===-1)throw new RangeError("Invalid status code");return new q(null,{status:c,headers:{location:s}})},e.DOMException=o.DOMException;try{new e.DOMException}catch{e.DOMException=function(c,m){this.message=c,this.name=m;var _=Error(c);this.stack=_.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function Ge(s,c){return new Promise(function(m,_){var S=new Q(s,c);if(S.signal&&S.signal.aborted)return _(new e.DOMException("Aborted","AbortError"));var w=new XMLHttpRequest;function Pe(){w.abort()}w.onload=function(){var me={status:w.status,statusText:w.statusText,headers:rn(w.getAllResponseHeaders()||"")};me.url="responseURL"in w?w.responseURL:me.headers.get("X-Request-URL");var Je="response"in w?w.response:w.responseText;m(new q(Je,me))},w.onerror=function(){_(new TypeError("Network request failed"))},w.ontimeout=function(){_(new TypeError("Network request failed"))},w.onabort=function(){_(new e.DOMException("Aborted","AbortError"))},w.open(S.method,S.url,!0),S.credentials==="include"?w.withCredentials=!0:S.credentials==="omit"&&(w.withCredentials=!1),"responseType"in w&&n.blob&&(w.responseType="blob"),S.headers.forEach(function(me,Je){w.setRequestHeader(Je,me)}),S.signal&&(S.signal.addEventListener("abort",Pe),w.onreadystatechange=function(){w.readyState===4&&S.signal.removeEventListener("abort",Pe)}),w.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return Ge.polyfill=!0,o.fetch||(o.fetch=Ge,o.Headers=p,o.Request=Q,o.Response=q),e.Headers=p,e.Request=Q,e.Response=q,e.fetch=Ge,Object.defineProperty(e,"__esModule",{value:!0}),e}({})})(Ue);Ue.fetch.ponyfill=!0;delete Ue.fetch.polyfill;var de=Ue;J=de.fetch;J.default=de.fetch;J.fetch=de.fetch;J.Headers=de.Headers;J.Request=de.Request;J.Response=de.Response;Jt.exports=J});var Ut=[{path:"",loadComponent:()=>import("./chunk-PCVORC3N.js").then(o=>o.HomeComponent)},{path:"search",loadComponent:()=>import("./chunk-RF3PVFUO.js").then(o=>o.SearchComponent)},{path:"login",loadComponent:()=>import("./chunk-7C7XDCSJ.js").then(o=>o.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-UWIPN7UH.js").then(o=>o.RegisterComponent)},{path:"**",loadComponent:()=>import("./chunk-ZYG5STXK.js").then(o=>o.NotFoundComponent)}];var Xe={user:null,isAuthenticated:!1,error:null,role:null};var Lt=Et(Xe,ve(be,Oe,(o,{user:t})=>F(A({},o),{user:t,isAuthenticated:!0,error:null,role:t.role||"user"})),ve(Re,(o,{user:t})=>F(A({},o),{user:t})),ve(se,(o,{error:t})=>F(A({},o),{error:t})),ve(ae,Me,()=>Xe));var an={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Te="__@ngrx/effects_create__";function te(o,t={}){let e=t.functional?o:o(),n=A(A({},an),t);return Object.defineProperty(e,Te,{value:n}),e}function cn(o){return Object.getOwnPropertyNames(o).filter(n=>o[n]&&o[n].hasOwnProperty(Te)?o[n][Te].hasOwnProperty("dispatch"):!1).map(n=>{let i=o[n][Te];return A({propertyName:n},i)})}function dn(o){return cn(o)}function At(o){return Object.getPrototypeOf(o)}function fn(o){return!!o.constructor&&o.constructor.name!=="Object"&&o.constructor.name!=="Function"}function Dt(o){return typeof o=="function"}function pn(o){return o.filter(Dt)}function un(o,t,e){let n=At(o),r=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,a=dn(o).map(({propertyName:f,dispatch:l,useEffectsErrorHandler:h})=>{let p=typeof o[f]=="function"?o[f]():o[f],b=h?e(p,t):p;return l===!1?b.pipe(it()):b.pipe(st()).pipe(x(L=>({effect:o[f],notification:L,propertyName:f,sourceName:r,sourceInstance:o})))});return Ke(...a)}var ln=10;function Bt(o,t,e=ln){return o.pipe(z(n=>(t&&t.handleError(n),e<=1?o:Bt(o,t,e-1))))}var Nt=(()=>{class o extends ye{constructor(e){super(),e&&(this.source=e)}lift(e){let n=new o;return n.source=this,n.operator=e,n}static{this.\u0275fac=function(n){return new(n||o)(ne(Ct))}}static{this.\u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function ce(...o){return xe(t=>o.some(e=>typeof e=="string"?e===t.type:e.type===t.type))}var ai=new W("@ngrx/effects Internal Root Guard"),ci=new W("@ngrx/effects User Provided Effects"),di=new W("@ngrx/effects Internal Root Effects"),fi=new W("@ngrx/effects Internal Root Effects Instances"),pi=new W("@ngrx/effects Internal Feature Effects"),ui=new W("@ngrx/effects Internal Feature Effects Instance Groups"),hn=new W("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Bt}),mn="@ngrx/effects/init",yn=St(mn);function gn(o,t){if(o.notification.kind==="N"){let e=o.notification.value;!wn(e)&&t.handleError(new Error(`Effect ${vn(o)} dispatched an invalid action: ${bn(e)}`))}}function wn(o){return typeof o!="function"&&o&&o.type&&typeof o.type=="string"}function vn({propertyName:o,sourceInstance:t,sourceName:e}){let n=typeof t[o]=="function";return!!e?`"${e}.${String(o)}${n?"()":""}"`:`"${String(o)}()"`}function bn(o){try{return JSON.stringify(o)}catch{return o}}var Mn="ngrxOnIdentifyEffects";function Sn(o){return Ye(o,Mn)}var _n="ngrxOnRunEffects";function Pn(o){return Ye(o,_n)}var Cn="ngrxOnInitEffects";function xn(o){return Ye(o,Cn)}function Ye(o,t){return o&&t in o&&typeof o[t]=="function"}var $t=(()=>{class o extends tt{constructor(e,n){super(),this.errorHandler=e,this.effectsErrorHandler=n}addEffects(e){this.next(e)}toActions(){return this.pipe(We(e=>fn(e)?At(e):e),ee(e=>e.pipe(We(En))),ee(e=>{let n=e.pipe(rt(r=>In(this.errorHandler,this.effectsErrorHandler)(r)),x(r=>(gn(r,this.errorHandler),r.notification)),xe(r=>r.kind==="N"&&r.value!=null),ot()),i=e.pipe(nt(1),xe(xn),x(r=>r.ngrxOnInitEffects()));return Ke(n,i)}))}static{this.\u0275fac=function(n){return new(n||o)(ne(ft),ne(hn))}}static{this.\u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function En(o){return Sn(o)?o.ngrxOnIdentifyEffects():""}function In(o,t){return e=>{let n=un(e,o,t);return Pn(e)?e.ngrxOnRunEffects(n):n}}var jn=(()=>{class o{get isStarted(){return!!this.effectsSubscription}constructor(e,n){this.effectSources=e,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(n){return new(n||o)(ne($t),ne(B))}}static{this.\u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function zt(...o){let t=o.flat(),e=pn(t);return dt([e,{provide:ct,multi:!0,useValue:()=>{I(_t),I(Pt,{optional:!0});let n=I(jn),i=I($t),r=!n.isStarted;r&&n.start();for(let a of t){let f=Dt(a)?I(a):a;i.addEffects(f)}r&&I(B).dispatch(yn())}}])}var yi=et(Ht(),1),Wt=et(Kt(),1);function u(o,t,e,n){function i(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function f(p){try{h(n.next(p))}catch(b){a(b)}}function l(p){try{h(n.throw(p))}catch(b){a(b)}}function h(p){p.done?r(p.value):i(p.value).then(f,l)}h((n=n.apply(o,t||[])).next())})}function Rn(o,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?o!==t||!n:!t.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(o):n?n.value:t.get(o)}var k=(()=>{class o{constructor(e){this.client=e}static flatten(e,n=""){let i={};for(let[r,a]of Object.entries(e)){let f=n?n+"["+r+"]":r;Array.isArray(a)?i=Object.assign(Object.assign({},i),o.flatten(a,f)):i[f]=a}return i}}return o.CHUNK_SIZE=5*1024*1024,o})();var d=class extends Error{constructor(t,e=0,n="",i=""){super(t),this.name="AppwriteException",this.message=t,this.code=e,this.type=n,this.response=i}},Le=class{constructor(){this.config={endpoint:"https://cloud.appwrite.io/v1",endpointRealtime:"",project:"",jwt:"",locale:"",session:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"14.0.1","X-Appwrite-Response-Format":"1.5.0"},this.realtime={socket:void 0,timeout:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=window?.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createSocket:()=>{var t,e,n;if(this.realtime.channels.size<1){this.realtime.reconnect=!1,(t=this.realtime.socket)===null||t===void 0||t.close();return}let i=new URLSearchParams;i.set("project",this.config.project),this.realtime.channels.forEach(a=>{i.append("channels[]",a)});let r=this.config.endpointRealtime+"/realtime?"+i.toString();(r!==this.realtime.url||!this.realtime.socket||((e=this.realtime.socket)===null||e===void 0?void 0:e.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&((n=this.realtime.socket)===null||n===void 0?void 0:n.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=r,this.realtime.socket=new WebSocket(r),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",a=>{this.realtime.reconnectAttempts=0}),this.realtime.socket.addEventListener("close",a=>{var f,l,h;if(!this.realtime.reconnect||((l=(f=this.realtime)===null||f===void 0?void 0:f.lastMessage)===null||l===void 0?void 0:l.type)==="error"&&((h=this.realtime)===null||h===void 0?void 0:h.lastMessage.data).code===1008){this.realtime.reconnect=!0;return}let p=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${p/1e3} seconds.`,a.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},p)}))},onMessage:t=>{var e,n;try{let i=JSON.parse(t.data);switch(this.realtime.lastMessage=i,i.type){case"connected":let r=JSON.parse((e=window.localStorage.getItem("cookieFallback"))!==null&&e!==void 0?e:"{}"),a=r?.[`a_session_${this.config.project}`],f=i.data;a&&!f.user&&((n=this.realtime.socket)===null||n===void 0||n.send(JSON.stringify({type:"authentication",data:{session:a}})));break;case"event":let l=i.data;if(l?.channels){if(!l.channels.some(p=>this.realtime.channels.has(p)))return;this.realtime.subscriptions.forEach(p=>{l.channels.some(b=>p.channels.includes(b))&&setTimeout(()=>p.callback(l))})}break;case"error":throw i.data;default:break}}catch(i){console.error(i)}},cleanUp:t=>{this.realtime.channels.forEach(e=>{t.includes(e)&&(Array.from(this.realtime.subscriptions).some(([i,r])=>r.channels.includes(e))||this.realtime.channels.delete(e))})}}}setEndpoint(t){return this.config.endpoint=t,this.config.endpointRealtime=this.config.endpointRealtime||this.config.endpoint.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(t){return this.config.endpointRealtime=t,this}setProject(t){return this.headers["X-Appwrite-Project"]=t,this.config.project=t,this}setJWT(t){return this.headers["X-Appwrite-JWT"]=t,this.config.jwt=t,this}setLocale(t){return this.headers["X-Appwrite-Locale"]=t,this.config.locale=t,this}setSession(t){return this.headers["X-Appwrite-Session"]=t,this.config.session=t,this}subscribe(t,e){let n=typeof t=="string"?[t]:t;n.forEach(r=>this.realtime.channels.add(r));let i=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(i,{channels:n,callback:e}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(i),this.realtime.cleanUp(n),this.realtime.connect()}}call(t,e,n={},i={}){var r,a;return u(this,void 0,void 0,function*(){t=t.toUpperCase(),n=Object.assign({},this.headers,n);let f={method:t,headers:n,credentials:"include"};if(typeof window<"u"&&window.localStorage&&(n["X-Fallback-Cookies"]=(r=window.localStorage.getItem("cookieFallback"))!==null&&r!==void 0?r:""),t==="GET")for(let[l,h]of Object.entries(k.flatten(i)))e.searchParams.append(l,h);else switch(n["content-type"]){case"application/json":f.body=JSON.stringify(i);break;case"multipart/form-data":let l=new FormData;for(let h in i)Array.isArray(i[h])?i[h].forEach(p=>{l.append(h+"[]",p)}):l.append(h,i[h]);f.body=l,delete n["content-type"];break}try{let l=null,h=yield(0,Wt.fetch)(e.toString(),f);if(!((a=h.headers.get("content-type"))===null||a===void 0)&&a.includes("application/json")?l=yield h.json():l={message:yield h.text()},400<=h.status)throw new d(l?.message,h.status,l?.type,l);let p=h.headers.get("X-Fallback-Cookies");return typeof window<"u"&&window.localStorage&&p&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",p)),l}catch(l){throw l instanceof d?l:new d(l.message)}})}},qe=class extends k{constructor(t){super(t)}get(){return u(this,void 0,void 0,function*(){let t="/account",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("get",n,{"content-type":"application/json"},e)})}create(t,e,n,i){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "email"');if(typeof n>"u")throw new d('Missing required parameter: "password"');let r="/account",a={};typeof t<"u"&&(a.userId=t),typeof e<"u"&&(a.email=e),typeof n<"u"&&(a.password=n),typeof i<"u"&&(a.name=i);let f=new URL(this.client.config.endpoint+r);return yield this.client.call("post",f,{"content-type":"application/json"},a)})}updateEmail(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "email"');if(typeof e>"u")throw new d('Missing required parameter: "password"');let n="/account/email",i={};typeof t<"u"&&(i.email=t),typeof e<"u"&&(i.password=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",r,{"content-type":"application/json"},i)})}listIdentities(t){return u(this,void 0,void 0,function*(){let e="/account/identities",n={};typeof t<"u"&&(n.queries=t);let i=new URL(this.client.config.endpoint+e);return yield this.client.call("get",i,{"content-type":"application/json"},n)})}deleteIdentity(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "identityId"');let e="/account/identities/{identityId}".replace("{identityId}",t),n={},i=new URL(this.client.config.endpoint+e);return yield this.client.call("delete",i,{"content-type":"application/json"},n)})}createJWT(){return u(this,void 0,void 0,function*(){let t="/account/jwt",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("post",n,{"content-type":"application/json"},e)})}listLogs(t){return u(this,void 0,void 0,function*(){let e="/account/logs",n={};typeof t<"u"&&(n.queries=t);let i=new URL(this.client.config.endpoint+e);return yield this.client.call("get",i,{"content-type":"application/json"},n)})}updateMFA(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "mfa"');let e="/account/mfa",n={};typeof t<"u"&&(n.mfa=t);let i=new URL(this.client.config.endpoint+e);return yield this.client.call("patch",i,{"content-type":"application/json"},n)})}createMfaAuthenticator(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "type"');let e="/account/mfa/authenticators/{type}".replace("{type}",t),n={},i=new URL(this.client.config.endpoint+e);return yield this.client.call("post",i,{"content-type":"application/json"},n)})}updateMfaAuthenticator(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "type"');if(typeof e>"u")throw new d('Missing required parameter: "otp"');let n="/account/mfa/authenticators/{type}".replace("{type}",t),i={};typeof e<"u"&&(i.otp=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)})}deleteMfaAuthenticator(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "type"');if(typeof e>"u")throw new d('Missing required parameter: "otp"');let n="/account/mfa/authenticators/{type}".replace("{type}",t),i={};typeof e<"u"&&(i.otp=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("delete",r,{"content-type":"application/json"},i)})}createMfaChallenge(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "factor"');let e="/account/mfa/challenge",n={};typeof t<"u"&&(n.factor=t);let i=new URL(this.client.config.endpoint+e);return yield this.client.call("post",i,{"content-type":"application/json"},n)})}updateMfaChallenge(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "challengeId"');if(typeof e>"u")throw new d('Missing required parameter: "otp"');let n="/account/mfa/challenge",i={};typeof t<"u"&&(i.challengeId=t),typeof e<"u"&&(i.otp=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)})}listMfaFactors(){return u(this,void 0,void 0,function*(){let t="/account/mfa/factors",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("get",n,{"content-type":"application/json"},e)})}getMfaRecoveryCodes(){return u(this,void 0,void 0,function*(){let t="/account/mfa/recovery-codes",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("get",n,{"content-type":"application/json"},e)})}createMfaRecoveryCodes(){return u(this,void 0,void 0,function*(){let t="/account/mfa/recovery-codes",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("post",n,{"content-type":"application/json"},e)})}updateMfaRecoveryCodes(){return u(this,void 0,void 0,function*(){let t="/account/mfa/recovery-codes",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",n,{"content-type":"application/json"},e)})}updateName(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "name"');let e="/account/name",n={};typeof t<"u"&&(n.name=t);let i=new URL(this.client.config.endpoint+e);return yield this.client.call("patch",i,{"content-type":"application/json"},n)})}updatePassword(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "password"');let n="/account/password",i={};typeof t<"u"&&(i.password=t),typeof e<"u"&&(i.oldPassword=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",r,{"content-type":"application/json"},i)})}updatePhone(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "phone"');if(typeof e>"u")throw new d('Missing required parameter: "password"');let n="/account/phone",i={};typeof t<"u"&&(i.phone=t),typeof e<"u"&&(i.password=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("patch",r,{"content-type":"application/json"},i)})}getPrefs(){return u(this,void 0,void 0,function*(){let t="/account/prefs",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("get",n,{"content-type":"application/json"},e)})}updatePrefs(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "prefs"');let e="/account/prefs",n={};typeof t<"u"&&(n.prefs=t);let i=new URL(this.client.config.endpoint+e);return yield this.client.call("patch",i,{"content-type":"application/json"},n)})}createRecovery(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "email"');if(typeof e>"u")throw new d('Missing required parameter: "url"');let n="/account/recovery",i={};typeof t<"u"&&(i.email=t),typeof e<"u"&&(i.url=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("post",r,{"content-type":"application/json"},i)})}updateRecovery(t,e,n){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "secret"');if(typeof n>"u")throw new d('Missing required parameter: "password"');let i="/account/recovery",r={};typeof t<"u"&&(r.userId=t),typeof e<"u"&&(r.secret=e),typeof n<"u"&&(r.password=n);let a=new URL(this.client.config.endpoint+i);return yield this.client.call("put",a,{"content-type":"application/json"},r)})}listSessions(){return u(this,void 0,void 0,function*(){let t="/account/sessions",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("get",n,{"content-type":"application/json"},e)})}deleteSessions(){return u(this,void 0,void 0,function*(){let t="/account/sessions",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("delete",n,{"content-type":"application/json"},e)})}createAnonymousSession(){return u(this,void 0,void 0,function*(){let t="/account/sessions/anonymous",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("post",n,{"content-type":"application/json"},e)})}createEmailPasswordSession(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "email"');if(typeof e>"u")throw new d('Missing required parameter: "password"');let n="/account/sessions/email",i={};typeof t<"u"&&(i.email=t),typeof e<"u"&&(i.password=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("post",r,{"content-type":"application/json"},i)})}updateMagicURLSession(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "secret"');let n="/account/sessions/magic-url",i={};typeof t<"u"&&(i.userId=t),typeof e<"u"&&(i.secret=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)})}createOAuth2Session(t,e,n,i){if(typeof t>"u")throw new d('Missing required parameter: "provider"');let r="/account/sessions/oauth2/{provider}".replace("{provider}",t),a={};typeof e<"u"&&(a.success=e),typeof n<"u"&&(a.failure=n),typeof i<"u"&&(a.scopes=i);let f=new URL(this.client.config.endpoint+r);a.project=this.client.config.project;for(let[l,h]of Object.entries(k.flatten(a)))f.searchParams.append(l,h);if(typeof window<"u"&&window?.location)window.location.href=f.toString();else return f}updatePhoneSession(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "secret"');let n="/account/sessions/phone",i={};typeof t<"u"&&(i.userId=t),typeof e<"u"&&(i.secret=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)})}createSession(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "secret"');let n="/account/sessions/token",i={};typeof t<"u"&&(i.userId=t),typeof e<"u"&&(i.secret=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("post",r,{"content-type":"application/json"},i)})}getSession(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "sessionId"');let e="/account/sessions/{sessionId}".replace("{sessionId}",t),n={},i=new URL(this.client.config.endpoint+e);return yield this.client.call("get",i,{"content-type":"application/json"},n)})}updateSession(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "sessionId"');let e="/account/sessions/{sessionId}".replace("{sessionId}",t),n={},i=new URL(this.client.config.endpoint+e);return yield this.client.call("patch",i,{"content-type":"application/json"},n)})}deleteSession(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "sessionId"');let e="/account/sessions/{sessionId}".replace("{sessionId}",t),n={},i=new URL(this.client.config.endpoint+e);return yield this.client.call("delete",i,{"content-type":"application/json"},n)})}updateStatus(){return u(this,void 0,void 0,function*(){let t="/account/status",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("patch",n,{"content-type":"application/json"},e)})}createPushTarget(t,e,n){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "targetId"');if(typeof e>"u")throw new d('Missing required parameter: "identifier"');let i="/account/targets/push",r={};typeof t<"u"&&(r.targetId=t),typeof e<"u"&&(r.identifier=e),typeof n<"u"&&(r.providerId=n);let a=new URL(this.client.config.endpoint+i);return yield this.client.call("post",a,{"content-type":"application/json"},r)})}updatePushTarget(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "targetId"');if(typeof e>"u")throw new d('Missing required parameter: "identifier"');let n="/account/targets/{targetId}/push".replace("{targetId}",t),i={};typeof e<"u"&&(i.identifier=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)})}deletePushTarget(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "targetId"');let e="/account/targets/{targetId}/push".replace("{targetId}",t),n={},i=new URL(this.client.config.endpoint+e);return yield this.client.call("delete",i,{"content-type":"application/json"},n)})}createEmailToken(t,e,n){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "email"');let i="/account/tokens/email",r={};typeof t<"u"&&(r.userId=t),typeof e<"u"&&(r.email=e),typeof n<"u"&&(r.phrase=n);let a=new URL(this.client.config.endpoint+i);return yield this.client.call("post",a,{"content-type":"application/json"},r)})}createMagicURLToken(t,e,n,i){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "email"');let r="/account/tokens/magic-url",a={};typeof t<"u"&&(a.userId=t),typeof e<"u"&&(a.email=e),typeof n<"u"&&(a.url=n),typeof i<"u"&&(a.phrase=i);let f=new URL(this.client.config.endpoint+r);return yield this.client.call("post",f,{"content-type":"application/json"},a)})}createOAuth2Token(t,e,n,i){if(typeof t>"u")throw new d('Missing required parameter: "provider"');let r="/account/tokens/oauth2/{provider}".replace("{provider}",t),a={};typeof e<"u"&&(a.success=e),typeof n<"u"&&(a.failure=n),typeof i<"u"&&(a.scopes=i);let f=new URL(this.client.config.endpoint+r);a.project=this.client.config.project;for(let[l,h]of Object.entries(k.flatten(a)))f.searchParams.append(l,h);if(typeof window<"u"&&window?.location)window.location.href=f.toString();else return f}createPhoneToken(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "phone"');let n="/account/tokens/phone",i={};typeof t<"u"&&(i.userId=t),typeof e<"u"&&(i.phone=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("post",r,{"content-type":"application/json"},i)})}createVerification(t){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "url"');let e="/account/verification",n={};typeof t<"u"&&(n.url=t);let i=new URL(this.client.config.endpoint+e);return yield this.client.call("post",i,{"content-type":"application/json"},n)})}updateVerification(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "secret"');let n="/account/verification",i={};typeof t<"u"&&(i.userId=t),typeof e<"u"&&(i.secret=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)})}createPhoneVerification(){return u(this,void 0,void 0,function*(){let t="/account/verification/phone",e={},n=new URL(this.client.config.endpoint+t);return yield this.client.call("post",n,{"content-type":"application/json"},e)})}updatePhoneVerification(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "userId"');if(typeof e>"u")throw new d('Missing required parameter: "secret"');let n="/account/verification/phone",i={};typeof t<"u"&&(i.userId=t),typeof e<"u"&&(i.secret=e);let r=new URL(this.client.config.endpoint+n);return yield this.client.call("put",r,{"content-type":"application/json"},i)})}};var Ae=class extends k{constructor(t){super(t)}listFiles(t,e,n){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');let i="/storage/buckets/{bucketId}/files".replace("{bucketId}",t),r={};typeof e<"u"&&(r.queries=e),typeof n<"u"&&(r.search=n);let a=new URL(this.client.config.endpoint+i);return yield this.client.call("get",a,{"content-type":"application/json"},r)})}createFile(t,e,n,i,r=a=>{}){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');if(typeof e>"u")throw new d('Missing required parameter: "fileId"');if(typeof n>"u")throw new d('Missing required parameter: "file"');let a="/storage/buckets/{bucketId}/files".replace("{bucketId}",t),f={};typeof e<"u"&&(f.fileId=e),typeof n<"u"&&(f.file=n),typeof i<"u"&&(f.permissions=i);let l=new URL(this.client.config.endpoint+a);if(!(n instanceof File))throw new d('Parameter "file" has to be a File.');let h=n.size;if(h<=k.CHUNK_SIZE)return yield this.client.call("post",l,{"content-type":"multipart/form-data"},f);let p={"content-type":"multipart/form-data"},b=0,M;if(e!="unique()")try{M=yield this.client.call("GET",new URL(this.client.config.endpoint+a+"/"+e),p),b=M.chunksUploaded*k.CHUNK_SIZE}catch{}for(;b<h;){let L=Math.min(b+k.CHUNK_SIZE-1,h-1);p["content-range"]="bytes "+b+"-"+L+"/"+h,M&&M.$id&&(p["x-appwrite-id"]=M.$id);let le=n.slice(b,L+1);f.file=new File([le],n.name),M=yield this.client.call("post",l,p,f),r&&r({$id:M.$id,progress:b/h*100,sizeUploaded:b,chunksTotal:M.chunksTotal,chunksUploaded:M.chunksUploaded}),b+=k.CHUNK_SIZE}return M})}getFile(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');if(typeof e>"u")throw new d('Missing required parameter: "fileId"');let n="/storage/buckets/{bucketId}/files/{fileId}".replace("{bucketId}",t).replace("{fileId}",e),i={},r=new URL(this.client.config.endpoint+n);return yield this.client.call("get",r,{"content-type":"application/json"},i)})}updateFile(t,e,n,i){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');if(typeof e>"u")throw new d('Missing required parameter: "fileId"');let r="/storage/buckets/{bucketId}/files/{fileId}".replace("{bucketId}",t).replace("{fileId}",e),a={};typeof n<"u"&&(a.name=n),typeof i<"u"&&(a.permissions=i);let f=new URL(this.client.config.endpoint+r);return yield this.client.call("put",f,{"content-type":"application/json"},a)})}deleteFile(t,e){return u(this,void 0,void 0,function*(){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');if(typeof e>"u")throw new d('Missing required parameter: "fileId"');let n="/storage/buckets/{bucketId}/files/{fileId}".replace("{bucketId}",t).replace("{fileId}",e),i={},r=new URL(this.client.config.endpoint+n);return yield this.client.call("delete",r,{"content-type":"application/json"},i)})}getFileDownload(t,e){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');if(typeof e>"u")throw new d('Missing required parameter: "fileId"');let n="/storage/buckets/{bucketId}/files/{fileId}/download".replace("{bucketId}",t).replace("{fileId}",e),i={},r=new URL(this.client.config.endpoint+n);i.project=this.client.config.project;for(let[a,f]of Object.entries(k.flatten(i)))r.searchParams.append(a,f);return r}getFilePreview(t,e,n,i,r,a,f,l,h,p,b,M,L){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');if(typeof e>"u")throw new d('Missing required parameter: "fileId"');let le="/storage/buckets/{bucketId}/files/{fileId}/preview".replace("{bucketId}",t).replace("{fileId}",e),C={};typeof n<"u"&&(C.width=n),typeof i<"u"&&(C.height=i),typeof r<"u"&&(C.gravity=r),typeof a<"u"&&(C.quality=a),typeof f<"u"&&(C.borderWidth=f),typeof l<"u"&&(C.borderColor=l),typeof h<"u"&&(C.borderRadius=h),typeof p<"u"&&(C.opacity=p),typeof b<"u"&&(C.rotation=b),typeof M<"u"&&(C.background=M),typeof L<"u"&&(C.output=L);let he=new URL(this.client.config.endpoint+le);C.project=this.client.config.project;for(let[_e,He]of Object.entries(k.flatten(C)))he.searchParams.append(_e,He);return he}getFileView(t,e){if(typeof t>"u")throw new d('Missing required parameter: "bucketId"');if(typeof e>"u")throw new d('Missing required parameter: "fileId"');let n="/storage/buckets/{bucketId}/files/{fileId}/view".replace("{bucketId}",t).replace("{fileId}",e),i={},r=new URL(this.client.config.endpoint+n);i.project=this.client.config.project;for(let[a,f]of Object.entries(k.flatten(i)))r.searchParams.append(a,f);return r}};var Zt,Xt,Se=class o{static custom(t){return t}static unique(t=7){let e=Rn(o,Zt,"m",Xt).call(o),n="";for(let i=0;i<t;i++){let r=Math.floor(Math.random()*16).toString(16);n+=r}return e+n}};Zt=Se,Xt=function(){let t=new Date,e=Math.floor(t.getTime()/1e3),n=t.getMilliseconds();return e.toString(16)+n.toString(16).padStart(5,"0")};var Yt="",Qt="67c986cc002d7d79e59c",fe=class o{client;account;storage;constructor(){this.client=new Le().setEndpoint("https://cloud.appwrite.io/v1").setProject(Yt),this.account=new qe(this.client),this.storage=new Ae(this.client)}register(t,e,n,i,r){debugger;return N(this.account.get()).pipe(V(()=>N(this.account.deleteSession("current")).pipe(V(()=>this.createUser(t,e,n,i,r)))),z(()=>this.createUser(t,e,n,i,r)))}createUser(t,e,n,i,r){return N(this.account.create(Se.unique(),e,n,t)).pipe(V(a=>N(this.account.createEmailPasswordSession(e,n)).pipe(V(()=>N(this.account.updatePrefs({role:"user",phone:i})).pipe(x(()=>a))))),V(a=>this.uploadProfilePic(a,r)))}uploadProfilePic(t,e){if(!e)return $(t);let n=`profile_${t.$id}_${new Date().getTime()}`;return N(this.storage.createFile(Qt,n,e)).pipe(V(i=>{let r=`https://cloud.appwrite.io/v1/storage/buckets/${Qt}/files/${i.$id}/view?project=${Yt}`;return N(this.account.updatePrefs({profilePic:r})).pipe(x(()=>F(A({},t),{profilePicUrl:r})))}))}login(t){return new ye(e=>{this.account.createEmailPasswordSession(t.email,t.password).then(n=>{debugger;this.getCurrentUser().subscribe(i=>{e.next(i),e.complete()})}).catch(n=>e.error(n))})}logout(){return new ye(t=>{this.account.deleteSession("current").then(()=>{t.next(),t.complete()}).catch(e=>t.error(e))})}getCurrentUser(){return N(this.account.get()).pipe(x(t=>({$id:t.$id,name:t.name,email:t.email,role:t.prefs.role||"user"})))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var De=class o{showToast(t,e="success"){let n=document.getElementById("toast-container");if(!n)return;let i=document.createElement("div");i.className=`toast align-items-center text-white bg-${e} border-0 show`,i.role="alert",i.ariaLive="assertive",i.ariaAtomic="true",i.innerHTML=`
      <div class="d-flex">
        <div class="toast-body">${t}</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
      </div>
    `,n.appendChild(i),setTimeout(()=>i.remove(),3e3)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var pe=class o{loadingSubject=new Ce(!1);loading$=this.loadingSubject.asObservable();show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};var Be=class o{actions$=I(Nt);authService=I(fe);toastService=I(De);loaderService=I(pe);store=I(B);constructor(){console.log("\u2705 AuthEffects Initialized"),console.log("\u{1F525} Actions$:",this.actions$??"\u{1F6A8} actions$ is undefined!"),console.log("\u{1F511} AuthService:",this.authService??"\u{1F6A8} authService is undefined!")}checkSession$=te(()=>this.actions$.pipe(ce(ke),at(this.store.select(je)),V(([t,e])=>e?this.authService.getCurrentUser().pipe(x(n=>be({user:n,role:n.role||"user"})),z(()=>$(Me()))):$({type:"[Auth] No Action"}))));sessionExpired$=te(()=>this.actions$.pipe(ce(Me),K(()=>{this.authService.logout(),localStorage.removeItem("user"),localStorage.removeItem("role"),this.toastService.showToast("You have been logged out!","warning")})),{dispatch:!1});login$=te(()=>this.actions$.pipe(ce(Rt),K(()=>this.loaderService.show()),ee(({credentials:t})=>this.authService.login(t).pipe(x(e=>{debugger;let n=e.role||"user";return localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("role",n),console.log("\u2705 Login Successful:",e),this.toastService.showToast("\u2705 Login Successful!","success"),be({user:e,role:n})}),z(e=>(this.toastService.showToast("\u{1F6A8} Login Failed! Invalid credentials.","danger"),$(se({error:"Invalid Credentials"})))),K(()=>this.loaderService.hide())))));loadUser$=te(()=>$(null).pipe(x(()=>{let t=localStorage.getItem("user"),e=localStorage.getItem("role");return t?Re({user:JSON.parse(t),role:e||"user"}):se({error:"No session found"})})));logout$=te(()=>this.actions$.pipe(ce(ae),K(()=>{this.loaderService.show(),localStorage.removeItem("user"),localStorage.removeItem("role")}),ee(()=>this.authService.logout().pipe(x(()=>(this.toastService.showToast("\u2705 Logged out successfully!","success"),kt())),z(t=>(this.toastService.showToast("\u{1F6A8} Logout Failed!","danger"),console.error("\u{1F6A8} Logout Failed:",t),$(se({error:"Logout Failed"})))),K(()=>this.loaderService.hide())))));register$=te(()=>this.actions$.pipe(ce(Ot),K(()=>this.loaderService.show()),ee(({name:t,email:e,password:n,phone:i,profilePic:r})=>this.authService.register(t,e,n,i,r).pipe(x(a=>(localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("role",a.role),this.toastService.showToast("\u2705 Registration Successful!","success"),Oe({user:a,role:a.role}))),z(a=>(this.toastService.showToast(`\u{1F6A8} ${a.message}`,"danger"),$(Tt({error:a})))),K(()=>this.loaderService.hide())))));static \u0275fac=function(e){return new(e||o)};static \u0275prov=E({token:o,factory:o.\u0275fac})};var Ft={providers:[gt(),xt({auth:Lt}),zt(Be),yt({eventCoalescing:!0}),bt(Ut),fe]};var Ne=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=Z({type:o,selectors:[["app-sidebar"]],standalone:!0,features:[Y],decls:13,vars:0,consts:[["tabindex","-1","id","sidebarMenu",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas",1,"btn-close"],[1,"offcanvas-body"],[1,"list-group"],[1,"list-group-item"]],template:function(e,n){e&1&&(y(0,"div",0)(1,"div",1)(2,"h5",2),v(3,"Menu"),g(),P(4,"button",3),g(),y(5,"div",4)(6,"ul",5)(7,"li",6),v(8,"View/Manage Bookings"),g(),y(9,"li",6),v(10,"Account"),g(),y(11,"li",6),v(12,"Offers"),g()()()())},styles:[".offcanvas[_ngcontent-%COMP%]{background-color:var(--header-color);color:var(--text-color)}.offcanvas[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{color:var(--text-color)}"]})};var ue=class o{constructor(){}menuState=new Ce(!1);menuOpen$=this.menuState.asObservable();toggleMenu(){this.menuState.next(!this.menuState.value)}closeMenu(){this.menuState.next(!1)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})};function Tn(o,t){if(o&1){let e=ie();ut(0),y(1,"button",14),R("click",function(){O(e);let i=j();return T(i.navigateTo("login"))}),P(2,"i",15),v(3," Login "),g(),y(4,"button",14),R("click",function(){O(e);let i=j();return T(i.navigateTo("register"))}),P(5,"i",15),v(6," Register "),g(),lt()}}function Un(o,t){if(o&1){let e=ie();y(0,"li")(1,"a",20),R("click",function(){O(e);let i=j(2);return T(i.navigateTo("dashboard"))}),P(2,"i",21),v(3," Admin Dashboard"),g()()}}function Ln(o,t){if(o&1){let e=ie();y(0,"div",16)(1,"button",17),P(2,"img",18),g(),y(3,"ul",19)(4,"li")(5,"p"),v(6," Welcome, "),y(7,"span"),v(8),g()()(),v(9),X(10,Un,4,0,"li",10),y(11,"li")(12,"a",20),R("click",function(){O(e);let i=j();return T(i.navigateTo("dashboard"))}),P(13,"i",21),v(14," Dashboard"),g()(),y(15,"li")(16,"a",20),R("click",function(){O(e);let i=j();return T(i.navigateTo("profile"))}),P(17,"i",22),v(18," Profile"),g()(),y(19,"li")(20,"a",20),R("click",function(){O(e);let i=j();return T(i.logout())}),P(21,"i",23),v(22," Logout"),g()()()()}if(o&2){let e=t.ngIf,n=j();U(2),H("src",(e==null?null:e.profilePic)||"public/images/default-avatar.jpg",pt),U(6),ht(e.name),U(),mt(" ",n.userRole$," "),U(),H("ngIf",n.userRole$==="admin")}}var $e=class o{constructor(t,e,n){this.menuService=t;this.router=e;this.store=n;this.user$=this.store.select(je),this.store.select(jt).subscribe(i=>{this.userRole$=i})}user$;userRole$;toggleMenu(){this.menuService.toggleMenu()}navigateTo(t){this.router.navigateByUrl(t)}logout(){this.store.dispatch(ae())}static \u0275fac=function(e){return new(e||o)(D(ue),D(Ie),D(B))};static \u0275cmp=Z({type:o,selectors:[["app-navigation-bar"]],standalone:!0,features:[Y],decls:25,vars:6,consts:[["role","header",1,"main-header","clearfix"],[1,"logo"],["id","menuToggle",1,"menu-toggle","text-white",3,"click"],["href","#"],["id","menu","role","navigation",1,"main-nav"],[1,"d-flex","align-items-center","main-menu"],[1,"form-select"],["selected",""],["value","1"],["value","2"],[4,"ngIf"],["class","dropdown",4,"ngIf"],[1,"btn","btn-outline-light"],[1,"fas","fa-search"],[1,"btn","btn-outline-light","me-3",3,"click"],[1,"fas","fa-sign-in-alt"],[1,"dropdown"],["type","button","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-light","dropdown-toggle","d-flex","align-items-center"],["alt","Profile","width","40","height","40",1,"rounded-circle","me-2",3,"src"],["aria-labelledby","userDropdown",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"fas","fa-tachometer-alt"],[1,"fas","fa-user-alt"],[1,"fas","fa-sign-out-alt"]],template:function(e,n){e&1&&(y(0,"header",0)(1,"div",1)(2,"span",2),R("click",function(){return n.toggleMenu()}),v(3,"\u2630"),g(),y(4,"a",3)(5,"em"),v(6,"Grad"),g(),v(7," School"),g()(),y(8,"nav",4)(9,"div",5)(10,"select",6)(11,"option",7),v(12,"EN"),g(),y(13,"option",8),v(14,"FR"),g(),y(15,"option",9),v(16,"ES"),g()(),X(17,Tn,7,0,"ng-container",10),ge(18,"async"),X(19,Ln,23,4,"div",11),ge(20,"async"),y(21,"button",12),P(22,"i",13),v(23," Search "),g()()()(),P(24,"app-sidebar")),e&2&&(U(17),H("ngIf",!we(18,2,n.user$)),U(2),H("ngIf",we(20,4,n.user$)))},dependencies:[Ne,re,oe,Ee],styles:['@media screen and (max-width: 1050px){.main-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:30px!important}.main-menu[_ngcontent-%COMP%]{padding-right:30px!important}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:5px!important}}.main-header[_ngcontent-%COMP%]{background-color:#162239f2;height:80px;position:fixed;z-index:12;width:100%;top:0}.main-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{float:left;line-height:80px;padding-left:60px}.main-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:36px;text-transform:uppercase;font-weight:800;color:#fff}.main-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:normal;color:#f5a425}.main-menu[_ngcontent-%COMP%]{float:right;padding-right:60px;padding-top:20px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;line-height:79px;margin-left:15px;position:relative}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{margin-left:0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 15px;font-size:13px;text-transform:uppercase;letter-spacing:.5px;font-weight:700;color:#fff;border:2px solid transparent;transition:all .5s}.main-menu[_ngcontent-%COMP%]   li.has-submenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"\\f107";font-family:FontAwesome;margin-left:5px}.main-menu[_ngcontent-%COMP%]   li.has-submenu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{display:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{position:absolute;width:160px;background-color:#162239f2;opacity:0;visibility:hidden;transition:all .5s}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .sub-menu[_ngcontent-%COMP%]{opacity:1;visibility:visible}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;line-height:20px;margin-left:0;margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #121b2f}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{padding-top:15px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0;border-bottom:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px;font-weight:500;padding:0 15px;letter-spacing:.5px;border:none;transition:all .5s}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f5a425;border:none}.main-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .main-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:2px solid #f5a425}@media (max-width: 950px){.main-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .main-nav[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:2px solid transparent;border-bottom:1px solid rgba(250,250,250,.25)}}.form-select[_ngcontent-%COMP%]{width:auto;background-color:#374151;color:#fff;border:none;margin-right:1rem;padding:.5rem}.form-select[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#374151}.fullscreen-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000e6;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:1050}.fullscreen-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-decoration:none;margin:15px 0}.fullscreen-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.menu-toggle[_ngcontent-%COMP%]{cursor:pointer;font-size:1.8rem;margin-right:10px}.dropdown-menu[_ngcontent-%COMP%]{min-width:190px}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.rounded-circle[_ngcontent-%COMP%]{object-fit:cover}.dropdown-menu.dropdown-menu-end[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:normal;margin-left:0;width:100%}.dropdown-menu.dropdown-menu-end[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:5px 22px}.dropdown-menu.dropdown-menu-end[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#333}#userDropdown[_ngcontent-%COMP%]{border:none}#userDropdown[_ngcontent-%COMP%]:hover, #userDropdown[_ngcontent-%COMP%]:focus, #userDropdown[_ngcontent-%COMP%]:active, #userDropdown[_ngcontent-%COMP%]:focus-visible{background-color:transparent}']})};function qn(o,t){o&1&&(y(0,"div",1)(1,"div",2)(2,"span",3),v(3,"Loading..."),g()()())}var ze=class o{constructor(t){this.loaderService=t;this.isLoading$=this.loaderService.loading$}isLoading$;static \u0275fac=function(e){return new(e||o)(D(pe))};static \u0275cmp=Z({type:o,selectors:[["app-loader"]],standalone:!0,features:[Y],decls:2,vars:3,consts:[["class","loader-overlay",4,"ngIf"],[1,"loader-overlay"],["role","status",1,"spinner-border","text-light"],[1,"visually-hidden"]],template:function(e,n){e&1&&(X(0,qn,4,0,"div",0),ge(1,"async")),e&2&&H("ngIf",we(1,1,n.isLoading$))},dependencies:[re,oe,Ee],styles:[".loader-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1050}"]})};function An(o,t){if(o&1){let e=ie();y(0,"div",4),R("click",function(i){O(e);let r=j();return T(r.closeMenu(i))}),y(1,"a",5),R("click",function(i){O(e);let r=j();return T(r.navigateTo(i,"/"))}),v(2,"Home"),g(),y(3,"a",5),R("click",function(i){O(e);let r=j();return T(r.navigateTo(i,"/search"))}),v(4,"Search"),g()()}if(o&2){let e=j();U(),Ze("active",e.isActive("/")),U(2),Ze("active",e.isActive("/search"))}}var Ve=class o{constructor(t,e,n){this.menuService=t;this.router=e;this.store=n;let i=localStorage.getItem("user");this.store.select(It).subscribe(r=>{r&&this.store.dispatch(ke())}),this.menuService.menuOpen$.subscribe(r=>{this.menuOpen=r}),this.router.events.subscribe(()=>{this.currentUrl=this.router.url})}title="college-search-app";menuOpen=!1;currentUrl="";closeMenu(t){t.target.closest("a")||this.menuService.closeMenu()}navigateTo(t,e){t.stopPropagation(),e!=this.currentUrl&&(this.menuService.closeMenu(),this.router.navigateByUrl(e))}isActive(t){return this.currentUrl===t}static \u0275fac=function(e){return new(e||o)(D(ue),D(Ie),D(B))};static \u0275cmp=Z({type:o,selectors:[["app-root"]],standalone:!0,features:[Y],decls:7,vars:1,consts:[["class","fullscreen-menu",3,"click",4,"ngIf"],["id","toast-container",1,"toast-container","position-fixed","top-0","end-0","p-3"],[1,"app-bg",2,"min-height","100vh"],[1,""],[1,"fullscreen-menu",3,"click"],[3,"click"]],template:function(e,n){e&1&&(P(0,"app-navigation-bar"),X(1,An,5,4,"div",0),P(2,"div",1)(3,"app-loader"),y(4,"div",2)(5,"div",3),P(6,"router-outlet"),g()()),e&2&&(U(),H("ngIf",n.menuOpen))},dependencies:[Mt,vt,$e,re,oe,ze],styles:[`.fullscreen-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000e6;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:1050;cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="40" height="45"><line x1="10" y1="10" x2="90" y2="90" stroke="white" stroke-width="2"/><line x1="10" y1="90" x2="90" y2="10" stroke="white" stroke-width="2"/></svg>') 20 20,auto}.fullscreen-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;font-size:2rem;text-decoration:none;margin:15px 0}.fullscreen-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.menu-toggle[_ngcontent-%COMP%]{cursor:pointer;font-size:1.8rem}.fullscreen-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#f5a425;font-weight:700;text-decoration:underline}`]})};wt(Ve,Ft).catch(o=>console.error(o));
